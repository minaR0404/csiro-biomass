# CSIRO Image2Biomass データ分析報告書

## 1. データセット概要

### 1.1 ファイル構成

| ファイル名 | サイズ | 説明 |
|-----------|--------|------|
| `train.csv` | 181,910 bytes | トレーニングデータ（メタ情報＋ターゲット値） |
| `test.csv` | 321 bytes | テストデータ（サンプル：1画像分のみ） |
| `sample_submission.csv` | 161 bytes | 提出フォーマットのサンプル |

### 1.2 データ構造

各CSVは「ロング形式」で構成されており、**1画像につき5行**（5つのターゲット変数）が存在する。

```
sample_id = 画像ID + "__" + target_name
例: ID1011485656__Dry_Clover_g
```

## 2. train.csv 詳細分析

### 2.1 基本統計

| 項目 | 値 |
|------|-----|
| 総レコード数 | 1,785行 |
| ユニーク画像数 | 357枚 |
| 収集年 | 2015年 |
| カラム数 | 9 |

### 2.2 カラム一覧

| # | カラム名 | データ型 | 説明 |
|---|----------|----------|------|
| 1 | `sample_id` | string | 一意識別子（画像ID__ターゲット名） |
| 2 | `image_path` | string | 画像パス（例: `train/ID1011485656.jpg`） |
| 3 | `Sampling_Date` | date | 収集日（YYYY/M/D形式） |
| 4 | `State` | string | オーストラリアの州 |
| 5 | `Species` | string | 牧草種（アンダースコア区切り） |
| 6 | `Pre_GSHH_NDVI` | float | 正規化植生指数（0.16〜0.91） |
| 7 | `Height_Ave_cm` | float | 平均牧草高さ（cm） |
| 8 | `target_name` | string | ターゲット変数名 |
| 9 | `target` | float | バイオマス値（グラム） |

### 2.3 州別分布（State）

| 州 | 略称 | レコード数 | 画像数 | 割合 |
|----|------|----------|--------|------|
| タスマニア | Tas | 690 | 138 | 38.7% |
| ビクトリア | Vic | 560 | 112 | 31.4% |
| ニューサウスウェールズ | NSW | 375 | 75 | 21.0% |
| 西オーストラリア | WA | 160 | 32 | 9.0% |

### 2.4 牧草種分布（Species）

| 牧草種 | レコード数 | 画像数 |
|--------|----------|--------|
| Ryegrass_Clover | 490 | 98 |
| Ryegrass | 310 | 62 |
| Phalaris_Clover | 210 | 42 |
| Clover | 205 | 41 |
| Fescue | 140 | 28 |
| Lucerne | 110 | 22 |
| その他（8種） | 320 | 64 |

**合計: 15種類**の牧草種が存在

### 2.5 月別分布

| 月 | レコード数 | 画像数 |
|----|----------|--------|
| 1月 | 85 | 17 |
| 2月 | 120 | 24 |
| 4月 | 50 | 10 |
| 5月 | 210 | 42 |
| 6月 | 265 | 53 |
| 7月 | 205 | 41 |
| 8月 | 185 | 37 |
| 9月 | 335 | 67 |
| 10月 | 145 | 29 |
| 11月 | 185 | 37 |

**注**: 3月と12月のデータなし

### 2.6 ターゲット変数の統計

| 変数名 | 平均 | 標準偏差 | 最小 | 最大 | 説明 |
|--------|------|----------|------|------|------|
| `Dry_Green_g` | 26.62 | 25.37 | 0.00 | 157.98 | 緑色植生（クローバー除く） |
| `Dry_Dead_g` | 12.04 | 12.38 | 0.00 | 83.84 | 枯死物質 |
| `Dry_Clover_g` | 6.65 | 12.10 | 0.00 | 71.79 | クローバー成分 |
| `GDM_g` | 33.27 | 24.90 | 1.04 | 157.98 | 緑色乾物 |
| `Dry_Total_g` | 45.32 | 27.94 | 1.04 | 185.70 | 総バイオマス |

### 2.7 特徴量の統計

| 特徴量 | 平均 | 標準偏差 | 最小 | 最大 |
|--------|------|----------|------|------|
| `Pre_GSHH_NDVI` | 0.66 | 0.15 | 0.16 | 0.91 |
| `Height_Ave_cm` | 7.60 | 10.27 | 1.00 | 70.00 |

## 3. test.csv 分析

### 3.1 構造（サンプルデータ）

```csv
sample_id,image_path,target_name
ID1001187975__Dry_Clover_g,test/ID1001187975.jpg,Dry_Clover_g
ID1001187975__Dry_Dead_g,test/ID1001187975.jpg,Dry_Dead_g
ID1001187975__Dry_Green_g,test/ID1001187975.jpg,Dry_Green_g
ID1001187975__Dry_Total_g,test/ID1001187975.jpg,Dry_Total_g
ID1001187975__GDM_g,test/ID1001187975.jpg,GDM_g
```

### 3.2 重要な違い

| 項目 | train.csv | test.csv |
|------|-----------|----------|
| `Sampling_Date` | あり | **なし** |
| `State` | あり | **なし** |
| `Species` | あり | **なし** |
| `Pre_GSHH_NDVI` | あり | **なし** |
| `Height_Ave_cm` | あり | **なし** |
| `target` | あり | **なし（予測対象）** |

**⚠️ 重要**: テストデータにはメタデータが含まれない。**画像のみから5つのターゲットを予測する必要がある。**

## 4. sample_submission.csv 分析

### 4.1 構造

```csv
sample_id,target
ID1001187975__Dry_Clover_g,0.0
ID1001187975__Dry_Dead_g,0.0
ID1001187975__Dry_Green_g,0.0
ID1001187975__Dry_Total_g,0.0
ID1001187975__GDM_g,0.0
```

### 4.2 提出フォーマット

- 2カラム: `sample_id`, `target`
- `target`: 予測したバイオマス値（グラム）

## 5. ターゲット変数間の関係

### 5.1 理論的関係

```
GDM_g = Dry_Green_g + Dry_Clover_g
Dry_Total_g = Dry_Green_g + Dry_Dead_g + Dry_Clover_g
```

### 5.2 検証が必要な点

- 上記の関係式が完全に成り立つか
- 予測時にこの制約を活用できるか

## 6. モデリングへの示唆

### 6.1 課題

1. **マルチターゲット回帰**: 5つの目標変数を同時に予測
2. **画像のみからの予測**: テストデータにはNDVI・Heightなどのメタデータなし
3. **ターゲット間の相関**: 制約条件として活用可能
4. **データの不均衡**:
   - `Dry_Clover_g`は多くが0.0
   - 州・牧草種の分布に偏りあり

### 6.2 推奨アプローチ

1. **CNN/Vision Transformer**: 画像から直接バイオマスを予測
2. **マルチタスク学習**: 5ターゲットを同時に学習し相関を活用
3. **アンサンブル**: 複数モデルの組み合わせ
4. **後処理**: ターゲット間の整合性チェック

### 6.3 評価指標

- **グローバル加重R²**
- `Dry_Total_g`が最も高い重み
- 負のR²（平均予測より悪い）はペナルティ

## 7. 次のステップ

1. [ ] 画像データの確認・可視化
2. [ ] ターゲット変数間の相関分析
3. [ ] ベースラインモデルの構築
4. [ ] データ拡張戦略の検討
5. [ ] 評価指標の実装

---

*報告書作成日: 2026年1月21日*
